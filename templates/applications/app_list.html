{% extends "base.html" %}

{% block content %}
  <p><a href="{% url 'applications:create' %}">+ New Application</a></p>

  <form method="get">
    <input type="text" name="q" placeholder="Search company or role..." value="{{ q }}">
    <select name="status">
      <option value="">All statuses</option>
      {% for value, label in status_choices %}
        <option value="{{ value }}" {% if status == value %}selected{% endif %}>{{ label }}</option>
      {% endfor %}
    </select>
    <button type="submit">Filter</button>
    <a href="{% url 'applications:list' %}">Reset</a>
  </form>

  <hr>

  {% if applications %}
    <ul>
      {% for app in applications %}
        <li>
          <strong>{{ app.company }}</strong> â€” {{ app.role_title }}
          ({{ app.get_status_display }})
          <a href="{% url 'applications:update' app.pk %}">Edit</a>
          <a href="{% url 'applications:delete' app.pk %}">Delete</a>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No applications yet. Add one!</p>
  {% endif %}
{% endblock %}
